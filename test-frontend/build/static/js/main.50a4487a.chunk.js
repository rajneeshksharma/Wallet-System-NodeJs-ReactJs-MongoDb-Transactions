(this["webpackJsonptest-frontend"]=this["webpackJsonptest-frontend"]||[]).push([[0],{134:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(22),s=a.n(r),l=(a(82),a(25)),i=a(12),o=a(147),j=a(146),d=a(150),b=a(7),u=a.n(b),h=a(2),O=a(11),p=a(13),x=a(151),m=a(73),v=a(141),f=a(20),g=a(23),y=a.n(g),I=a(36),w=a.n(I),S=a(69),C=a.n(S).a.create({baseURL:"".concat(window.location.protocol,"//").concat(window.location.host,"/api/v1")}),D=a(53),N=a(56),T=a(70),k=a(71),A=a.n(k),B=a(1);var E=function(){var e=Object(i.f)(),t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)({page:1,limit:5,walletID:null,sortBy:"createdAt:desc"}),l=Object(p.a)(s,2),o=l[0],j=l[1],d=Object(n.useState)([]),b=Object(p.a)(d,2),g=b[0],I=b[1],S=Object(n.useState)(1),k=Object(p.a)(S,2),E=k[0],L=k[1],W=Object(n.useState)(0),F=Object(p.a)(W,2),P=F[0],_=F[1];function z(e){return R.apply(this,arguments)}function R(){return(R=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/transactions?walletId=".concat(t.walletID,"&page=").concat(t.page,"&limit=").concat(t.limit,"&sortBy=").concat(t.sortBy));case 3:return a=e.sent,r(a.data.results),_(a.data.totalResults),e.abrupt("return",a.data.results);case 9:e.prev=9,e.t0=e.catch(0),f.b.error("Internal Server, Please try again");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}Object(n.useEffect)((function(){var t=y.a.getWalletId();t?(j(Object(h.a)(Object(h.a)({},o),{},{walletID:t})),z(Object(h.a)(Object(h.a)({},o),{},{walletID:t}))):e.push("/setup")}),[]);var G=Object(n.useCallback)((function(e){L(e),j(Object(h.a)(Object(h.a)({},o),{},{page:e})),z(Object(h.a)(Object(h.a)({},o),{},{page:e}))}),[o]);Object(n.useEffect)((function(){for(var e=[],t=function(t){e.push(Object(B.jsx)(x.a.Item,{active:t===E,onClick:function(){return G(t)},children:t},t))},a=1;a<=Math.round(P/5);a++)t(a);I(e)}),[P,E,G]);var U=function(e){var t="desc";"desc"==="".concat(o.sortBy).split(":")[1]&&(t="asc"),L(1),j(Object(h.a)(Object(h.a)({},o),{},{page:1,sortBy:"".concat(e,":").concat(t)})),z(Object(h.a)(Object(h.a)({},o),{},{page:1,sortBy:"".concat(e,":").concat(t)}))},q=function(){var e=Object(O.a)(u.a.mark((function e(){var t,a,n,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{label:"Transaction ID",value:"_id"},{label:"Type",value:"type"},{label:"Description",value:"description"},{label:"Amount",value:"amount"},{label:"Balance",value:"balance"},{label:"Wallet ID",value:"walletId"},{label:"Created Date",value:"createdAt"}],e.next=3,z(Object(h.a)(Object(h.a)({},o),{},{page:1,limit:P}));case 3:a=e.sent,n=a.map((function(e){return e.createdAt=new Date(e.date).toLocaleString(),e})),c=new T.Parser({fields:t}),r=c.parse(n),s=new Blob([r],{type:"text/csv;charset=utf-8;"}),A.a.saveAs(s,"transactions.csv");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:"center",children:[Object(B.jsx)("h3",{className:"text-center mb-5",children:"Wallet Transactions"}),Object(B.jsx)(m.a,{onClick:function(){e.push("/add")},children:"Add New Transaction"}),Array.isArray(c)&&c.length&&Object(B.jsx)(m.a,{style:{float:"right"},onClick:q,children:"Download Transactions"}),Array.isArray(c)&&c.length?Object(B.jsxs)("div",{children:[Object(B.jsxs)(v.a,{responsive:!0,children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Transaction ID"}),Object(B.jsxs)("th",{onClick:function(){return U("amount")},children:["Amount ",Object(B.jsx)(D.a,{icon:N.a})]}),Object(B.jsx)("th",{children:"Type"}),Object(B.jsx)("th",{children:"Balance"}),Object(B.jsx)("th",{children:"Description"}),Object(B.jsxs)("th",{onClick:function(){return U("date")},children:["Created Date ",Object(B.jsx)(D.a,{icon:N.a})]})]})}),Object(B.jsx)("tbody",{children:c&&c.length&&c.map((function(e){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{children:e._id}),Object(B.jsx)("td",{children:w.a.currencyFormat(e.amount)}),Object(B.jsx)("td",{children:"CREDIT"===e.type?Object(B.jsx)("span",{className:"text-success",children:e.type}):Object(B.jsx)("span",{className:"text-danger",children:e.type})}),Object(B.jsx)("td",{children:w.a.currencyFormat(e.balance)}),Object(B.jsx)("td",{children:e.description?e.description:"-"}),Object(B.jsx)("td",{children:new Date(e.date).toLocaleString()})]},e._id)}))})]}),Object(B.jsx)("div",{className:"float-right",children:Object(B.jsx)(x.a,{children:g})})]}):Object(B.jsx)("div",{children:" No Transaction Found."})]})},L=a(149),W=a(142),F=a(74),P=a(143),_=a(75);var z=function(){var e=Object(i.f)(),t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var t=y.a.getWalletId();function a(){return(a=Object(O.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/wallet/".concat(t));case 3:a=e.sent,r(a.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),f.b.error("Internal Server, Please try again"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t?function(){a.apply(this,arguments)}():e.push("/setup")}),[e]),Object(B.jsxs)("div",{className:"center",children:[Object(B.jsx)("h3",{className:"text-center mb-5",children:"Wallet Details"}),c&&Object(B.jsxs)(L.a,{body:!0,children:[Object(B.jsxs)(W.a,{sm:8,md:8,children:[Object(B.jsx)(F.a,{children:Object(B.jsxs)(L.a.Title,{children:["Wallet ID: ",Object(B.jsx)("span",{children:c._id})]})}),Object(B.jsx)(F.a,{sm:4,md:4,children:Object(B.jsx)(m.a,{style:{float:"right"},onClick:function(){e.push("/add")},children:"Add New Transaction"})})]}),Object(B.jsx)("hr",{}),Object(B.jsx)(L.a.Text,{children:Object(B.jsxs)(P.a,{className:"list-group-flush",children:[Object(B.jsxs)(_.a,{children:[Object(B.jsx)("b",{children:"Username"}),": ",c.name]}),Object(B.jsxs)(_.a,{children:[Object(B.jsx)("b",{children:"Current Balance"}),": ",w.a.currencyFormat(c.balance)]}),Object(B.jsxs)(_.a,{children:[Object(B.jsx)("b",{children:"Created Date"}),": ",new Date(c.date).toLocaleString()]})]})})]})]})},R=(a(134),a(135),a(148)),G=a(45);var U=function(){var e=Object(i.f)(),t=Object(G.a)(),a=t.register,n=t.handleSubmit,c=t.formState.errors,r=function(){var t=Object(O.a)(u.a.mark((function t(a){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.post("/setup",{name:a.username,balance:a.balance?a.balance:0});case 3:(null===(c=t.sent)||void 0===c||null===(n=c.data)||void 0===n?void 0:n._id)?(y.a.setWalletId(c.data._id),e.push("/")):f.b.error("Internal Server, Please try again"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),f.b.error("Internal Server, Please try again");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:"center",children:[Object(B.jsx)("h3",{className:"text-center",children:"Setup New Wallet"}),Object(B.jsxs)(R.a,{children:[Object(B.jsxs)(R.a.Group,{className:"mb-3",controlId:"username",children:[Object(B.jsx)(R.a.Label,{children:"Username"}),Object(B.jsx)(R.a.Control,Object(h.a)({size:"lg",type:"text",placeholder:"Enter username",name:"username"},a("username",{required:!0,maxLength:20,minLength:3}))),(null===c||void 0===c?void 0:c.username)&&Object(B.jsx)(R.a.Text,{className:"text-danger",children:"* Username is required and need to be 3-20 characters long."})]}),Object(B.jsxs)(R.a.Group,{className:"mb-3",controlId:"balance",children:[Object(B.jsx)(R.a.Label,{children:"Initial Balance"}),Object(B.jsx)(R.a.Control,Object(h.a)({type:"number",size:"lg",name:"balance",placeholder:"Enter initial balance"},a("balance")))," "]}),Object(B.jsx)(m.a,{variant:"primary",size:"lg",onClick:n(r),type:"submit",children:"Submit"})]})]})},q=a(144),J=a(145);var M=function(){var e=Object(i.f)(),t=Object(n.useState)("CREDIT"),a=Object(p.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(null),l=Object(p.a)(s,2),o=l[0],j=l[1],d=Object(G.a)(),b=d.register,x=d.handleSubmit,v=d.formState.errors;Object(n.useEffect)((function(){var t=y.a.getWalletId();t?j(t):e.push("/setup")}),[e]);var g=function(){var t=Object(O.a)(u.a.mark((function t(a){var n,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={amount:a.amount,type:c},a.description&&(r.description=a.description),t.next=5,C.post("/transact/".concat(o),r);case 5:(null===(s=t.sent)||void 0===s||null===(n=s.data)||void 0===n?void 0:n._id)?(y.a.setWalletId(s.data._id),e.push("/")):f.b.error("Internal Server"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),f.b.error("Internal Server, Please try again");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:"center",children:[Object(B.jsx)("h3",{className:"text-center",children:"Add New Debit/Credit Transaction "}),Object(B.jsxs)("p",{children:["Wallet ID : ",o]}),Object(B.jsxs)(R.a,{children:[Object(B.jsxs)(R.a.Group,{className:"mb-3",controlId:"amount",children:[Object(B.jsx)(R.a.Label,{children:"Amount"}),Object(B.jsx)(R.a.Control,Object(h.a)({size:"lg",type:"number",placeholder:"Enter amount",name:"amount"},b("amount",{required:!0,min:1}))),(null===v||void 0===v?void 0:v.amount)&&Object(B.jsx)(R.a.Text,{className:"text-danger",children:"* Amount is required and need to be more than 0."})]}),Object(B.jsxs)(R.a.Group,{className:"mb-3",controlId:"description",children:[Object(B.jsx)(R.a.Label,{children:"Description"}),Object(B.jsx)(R.a.Control,Object(h.a)({type:"text",size:"lg",name:"description",placeholder:"Enter description"},b("description")))," "]}),Object(B.jsx)(R.a.Group,{className:"mb-3",controlId:"type",children:Object(B.jsx)(q.a,{children:[{name:"Debit",value:"DEBIT"},{name:"Credit",value:"CREDIT"}].map((function(e,t){return Object(B.jsx)(J.a,{id:"radio-".concat(t),type:"radio",variant:t%2?"outline-success":"outline-danger",name:"radio",value:e.value,checked:c===e.value,onChange:function(e){return r(e.currentTarget.value)},children:e.name},t)}))})}),Object(B.jsx)(m.a,{variant:"primary",size:"lg",onClick:x(g),type:"submit",children:"Submit"})]})]})};a(136);var $=function(){return Object(B.jsxs)(l.a,{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)(o.a,{bg:"light",expand:"lg",children:Object(B.jsxs)(j.a,{children:[Object(B.jsx)(o.a.Brand,{children:"React-Test"}),Object(B.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(B.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(B.jsxs)(d.a,{className:"me-auto",children:[Object(B.jsx)(d.a.Link,{as:l.b,to:"/",children:"Wallet"}),Object(B.jsx)(d.a.Link,{as:l.b,to:"/transactions",children:"Transactions"})]})})]})}),Object(B.jsx)("div",{className:"main-border",children:Object(B.jsxs)(i.c,{children:[Object(B.jsx)(i.a,{path:"/transactions",children:Object(B.jsx)(E,{})}),Object(B.jsx)(i.a,{path:"/setup",children:Object(B.jsx)(U,{})}),Object(B.jsx)(i.a,{path:"/add",children:Object(B.jsx)(M,{})}),Object(B.jsx)(i.a,{path:"/",children:Object(B.jsx)(z,{})})]})})]}),Object(B.jsx)(f.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,152)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)($,{})}),document.getElementById("root")),H()},23:function(e,t,a){var n=a(84),c="my-secret-key@123";t.setWalletId=function(e){var t=n.AES.encrypt("".concat(e),"".concat(c)).toString();console.log(t),localStorage.setItem("walletId",t)},t.getWalletId=function(){return!!localStorage.getItem("walletId")&&n.AES.decrypt("".concat(localStorage.getItem("walletId")),"".concat(c)).toString(n.enc.Utf8)}},36:function(e,t){t.currencyFormat=function(e){return"$"+e.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},82:function(e,t,a){},85:function(e,t){}},[[139,1,2]]]);
//# sourceMappingURL=main.50a4487a.chunk.js.map