(this["webpackJsonptest-frontend"]=this["webpackJsonptest-frontend"]||[]).push([[0],{134:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(22),s=a.n(r),l=(a(82),a(25)),i=a(12),o=a(147),j=a(146),d=a(150),b=a(7),u=a.n(b),h=a(2),O=a(11),p=a(13),x=a(151),m=a(73),v=a(141),f=a(21),g=a(23),y=a.n(g),I=a(36),w=a.n(I),S=a(69),C=a.n(S).a.create({baseURL:"http://localhost:3001/api/v1"}),D=a(53),N=a(56),T=a(70),k=a(71),E=a.n(k),A=a(1);var B=function(){var e=Object(i.f)(),t=Object(c.useState)([]),a=Object(p.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)({page:1,limit:5,walletID:null,sortBy:"createdAt:desc"}),l=Object(p.a)(s,2),o=l[0],j=l[1],d=Object(c.useState)([]),b=Object(p.a)(d,2),g=b[0],I=b[1],S=Object(c.useState)(1),k=Object(p.a)(S,2),B=k[0],L=k[1],W=Object(c.useState)(0),F=Object(p.a)(W,2),_=F[0],R=F[1];function z(e){return G.apply(this,arguments)}function G(){return(G=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/transactions?walletId=".concat(t.walletID,"&page=").concat(t.page,"&limit=").concat(t.limit,"&sortBy=").concat(t.sortBy));case 3:return a=e.sent,r(a.data.results),R(a.data.totalResults),e.abrupt("return",a.data.results);case 9:e.prev=9,e.t0=e.catch(0),f.b.error("Internal Server Error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}Object(c.useEffect)((function(){var t=y.a.getWalletId();t?(j(Object(h.a)(Object(h.a)({},o),{},{walletID:t})),z(Object(h.a)(Object(h.a)({},o),{},{walletID:t}))):e.push("/setup")}),[]);var P=Object(c.useCallback)((function(e){L(e),j(Object(h.a)(Object(h.a)({},o),{},{page:e})),z(Object(h.a)(Object(h.a)({},o),{},{page:e}))}),[o]);Object(c.useEffect)((function(){for(var e=[],t=function(t){e.push(Object(A.jsx)(x.a.Item,{active:t===B,onClick:function(){return P(t)},children:t},t))},a=1;a<=Math.round(_/5);a++)t(a);I(e)}),[_,B,P]);var U=function(e){var t="desc";"desc"==="".concat(o.sortBy).split(":")[1]&&(t="asc"),L(1),j(Object(h.a)(Object(h.a)({},o),{},{page:1,sortBy:"".concat(e,":").concat(t)})),z(Object(h.a)(Object(h.a)({},o),{},{page:1,sortBy:"".concat(e,":").concat(t)}))},q=function(){var e=Object(O.a)(u.a.mark((function e(){var t,a,c,n,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{label:"Transaction ID",value:"_id"},{label:"Type",value:"type"},{label:"Description",value:"description"},{label:"Amount",value:"amount"},{label:"Balance",value:"balance"},{label:"Wallet ID",value:"walletId"},{label:"Created Date",value:"createdAt"}],e.next=3,z(Object(h.a)(Object(h.a)({},o),{},{page:1,limit:_}));case 3:a=e.sent,c=a.map((function(e){return e.createdAt=new Date(e.date).toLocaleString(),e})),n=new T.Parser({fields:t}),r=n.parse(c),s=new Blob([r],{type:"text/csv;charset=utf-8;"}),E.a.saveAs(s,"transactions.csv");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"center",children:[Object(A.jsx)("h3",{className:"text-center mb-5",children:"Wallet Transactions"}),Object(A.jsx)(m.a,{onClick:function(){e.push("/add")},children:"Add New Transaction"}),Object(A.jsx)(m.a,{style:{float:"right"},onClick:q,children:"Download Transactions"}),Array.isArray(n)&&n.length?Object(A.jsxs)("div",{children:[Object(A.jsxs)(v.a,{responsive:!0,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Transaction ID"}),Object(A.jsxs)("th",{onClick:function(){return U("amount")},children:["Amount ",Object(A.jsx)(D.a,{icon:N.a})]}),Object(A.jsx)("th",{children:"Type"}),Object(A.jsx)("th",{children:"Balance"}),Object(A.jsx)("th",{children:"Description"}),Object(A.jsxs)("th",{onClick:function(){return U("date")},children:["Created Date ",Object(A.jsx)(D.a,{icon:N.a})]})]})}),Object(A.jsx)("tbody",{children:n&&n.length&&n.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e._id}),Object(A.jsx)("td",{children:w.a.currencyFormat(e.amount)}),Object(A.jsx)("td",{children:"CREDIT"===e.type?Object(A.jsx)("span",{className:"text-success",children:e.type}):Object(A.jsx)("span",{className:"text-danger",children:e.type})}),Object(A.jsx)("td",{children:w.a.currencyFormat(e.balance)}),Object(A.jsx)("td",{children:e.description?e.description:"-"}),Object(A.jsx)("td",{children:new Date(e.date).toLocaleString()})]},e._id)}))})]}),Object(A.jsx)("div",{className:"float-right",children:Object(A.jsx)(x.a,{children:g})})]}):Object(A.jsx)("div",{children:" No Transaction Found."})]})},L=a(149),W=a(142),F=a(74),_=a(143),R=a(75);var z=function(){var e=Object(i.f)(),t=Object(c.useState)(null),a=Object(p.a)(t,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){var t=y.a.getWalletId();function a(){return(a=Object(O.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/wallet/".concat(t));case 3:a=e.sent,r(a.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),f.b.error("Internal Server Error"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t?function(){a.apply(this,arguments)}():e.push("/setup")}),[e]),Object(A.jsxs)("div",{className:"center",children:[Object(A.jsx)("h3",{className:"text-center mb-5",children:"Wallet Details"}),n&&Object(A.jsxs)(L.a,{body:!0,children:[Object(A.jsxs)(W.a,{sm:8,md:8,children:[Object(A.jsx)(F.a,{children:Object(A.jsxs)(L.a.Title,{children:["Wallet ID: ",Object(A.jsx)("span",{children:n._id})]})}),Object(A.jsx)(F.a,{sm:4,md:4,children:Object(A.jsx)(m.a,{style:{float:"right"},onClick:function(){e.push("/add")},children:"Add New Transaction"})})]}),Object(A.jsx)("hr",{}),Object(A.jsx)(L.a.Text,{children:Object(A.jsxs)(_.a,{className:"list-group-flush",children:[Object(A.jsxs)(R.a,{children:[Object(A.jsx)("b",{children:"Username"}),": ",n.name]}),Object(A.jsxs)(R.a,{children:[Object(A.jsx)("b",{children:"Current Balance"}),": ",w.a.currencyFormat(n.balance)]}),Object(A.jsxs)(R.a,{children:[Object(A.jsx)("b",{children:"Created Date"}),": ",new Date(n.date).toLocaleString()]})]})})]})]})},G=(a(134),a(135),a(148)),P=a(45);var U=function(){var e=Object(i.f)(),t=Object(P.a)(),a=t.register,c=t.handleSubmit,n=t.formState.errors,r=function(){var t=Object(O.a)(u.a.mark((function t(a){var c,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.post("/setup",{name:a.username,balance:a.balance?a.balance:0});case 3:(null===(n=t.sent)||void 0===n||null===(c=n.data)||void 0===c?void 0:c._id)?(y.a.setWalletId(n.data._id),e.push("/")):f.b.error("Internal Server Error"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),f.b.error("Internal Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"center",children:[Object(A.jsx)("h3",{className:"text-center",children:"Setup New Wallet"}),Object(A.jsxs)(G.a,{children:[Object(A.jsxs)(G.a.Group,{className:"mb-3",controlId:"username",children:[Object(A.jsx)(G.a.Label,{children:"Username"}),Object(A.jsx)(G.a.Control,Object(h.a)({size:"lg",type:"text",placeholder:"Enter username",name:"username"},a("username",{required:!0,maxLength:20,minLength:3}))),(null===n||void 0===n?void 0:n.username)&&Object(A.jsx)(G.a.Text,{className:"text-danger",children:"* Username is required and need to be 3-20 characters long."})]}),Object(A.jsxs)(G.a.Group,{className:"mb-3",controlId:"balance",children:[Object(A.jsx)(G.a.Label,{children:"Initial Balance"}),Object(A.jsx)(G.a.Control,Object(h.a)({type:"number",size:"lg",name:"balance",placeholder:"Enter initial balance"},a("balance")))," "]}),Object(A.jsx)(m.a,{variant:"primary",size:"lg",onClick:c(r),type:"submit",children:"Submit"})]})]})},q=a(144),M=a(145);var H=function(){var e=Object(i.f)(),t=Object(c.useState)("CREDIT"),a=Object(p.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(null),l=Object(p.a)(s,2),o=l[0],j=l[1],d=Object(P.a)(),b=d.register,x=d.handleSubmit,v=d.formState.errors;Object(c.useEffect)((function(){var t=y.a.getWalletId();t?j(t):e.push("/setup")}),[e]);var g=function(){var t=Object(O.a)(u.a.mark((function t(a){var c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={amount:a.amount,type:n},a.description&&(c.description=a.description),t.next=5,C.post("/transact/".concat(o),c);case 5:r=t.sent,console.log("FORM DATA+++++==",{res:r.data}),r.data._id&&(y.a.setWalletId(r.data._id),e.push("/")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),f.b.error("Internal Server Error",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"center",children:[Object(A.jsx)("h3",{className:"text-center",children:"Add New Debit/Credit Transaction "}),Object(A.jsxs)("p",{children:["Wallet ID : ",o]}),Object(A.jsxs)(G.a,{children:[Object(A.jsxs)(G.a.Group,{className:"mb-3",controlId:"amount",children:[Object(A.jsx)(G.a.Label,{children:"Amount"}),Object(A.jsx)(G.a.Control,Object(h.a)({size:"lg",type:"number",placeholder:"Enter amount",name:"amount"},b("amount",{required:!0,min:1}))),(null===v||void 0===v?void 0:v.amount)&&Object(A.jsx)(G.a.Text,{className:"text-danger",children:"* Amount is required and need to be more than 0."})]}),Object(A.jsxs)(G.a.Group,{className:"mb-3",controlId:"description",children:[Object(A.jsx)(G.a.Label,{children:"Description"}),Object(A.jsx)(G.a.Control,Object(h.a)({type:"text",size:"lg",name:"description",placeholder:"Enter description"},b("description")))," "]}),Object(A.jsx)(G.a.Group,{className:"mb-3",controlId:"type",children:Object(A.jsx)(q.a,{children:[{name:"Debit",value:"DEBIT"},{name:"Credit",value:"CREDIT"}].map((function(e,t){return Object(A.jsx)(M.a,{id:"radio-".concat(t),type:"radio",variant:t%2?"outline-success":"outline-danger",name:"radio",value:e.value,checked:n===e.value,onChange:function(e){return r(e.currentTarget.value)},children:e.name},t)}))})}),Object(A.jsx)(m.a,{variant:"primary",size:"lg",onClick:x(g),type:"submit",children:"Submit"})]})]})};a(136);var J=function(){return Object(A.jsxs)(l.a,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)(o.a,{bg:"light",expand:"lg",children:Object(A.jsxs)(j.a,{children:[Object(A.jsx)(o.a.Brand,{children:"React-Test"}),Object(A.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(A.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(A.jsxs)(d.a,{className:"me-auto",children:[Object(A.jsx)(d.a.Link,{as:l.b,to:"/",children:"Wallet"}),Object(A.jsx)(d.a.Link,{as:l.b,to:"/transactions",children:"Transactions"})]})})]})}),Object(A.jsx)("div",{className:"main-border",children:Object(A.jsxs)(i.c,{children:[Object(A.jsx)(i.a,{path:"/transactions",children:Object(A.jsx)(B,{})}),Object(A.jsx)(i.a,{path:"/setup",children:Object(A.jsx)(U,{})}),Object(A.jsx)(i.a,{path:"/add",children:Object(A.jsx)(H,{})}),Object(A.jsx)(i.a,{path:"/",children:Object(A.jsx)(z,{})})]})})]}),Object(A.jsx)(f.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,152)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(J,{})}),document.getElementById("root")),$()},23:function(e,t,a){var c=a(84),n="my-secret-key@123";t.setWalletId=function(e){var t=c.AES.encrypt("".concat(e),"".concat(n)).toString();console.log(t),localStorage.setItem("walletId",t)},t.getWalletId=function(){return!!localStorage.getItem("walletId")&&c.AES.decrypt("".concat(localStorage.getItem("walletId")),"".concat(n)).toString(c.enc.Utf8)}},36:function(e,t){t.currencyFormat=function(e){return"$"+e.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},82:function(e,t,a){},85:function(e,t){}},[[139,1,2]]]);
//# sourceMappingURL=main.8978632a.chunk.js.map